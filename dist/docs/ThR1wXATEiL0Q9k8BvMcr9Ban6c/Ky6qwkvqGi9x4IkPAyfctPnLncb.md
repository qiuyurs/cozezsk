---
title: 2.7 代码节点
slug: ThR1wXATEiL0Q9k8BvMcr9Ban6c\Ky6qwkvqGi9x4IkPAyfctPnLncb
sidebar_position: 6
---


# 2.7 代码节点

代码节点支持通过编写代码来生成返回值。扣子支持在代码节点内使用 IDE 工具，通过 AI 自动生成代码或编写自定义代码逻辑，来处理输入参数并返回响应结果。

简单来说：代码节点就像一个可以自己写程序的魔法盒子！你可以用编程软件在里面写代码，或者让 AI 小助手帮你自动生成代码。这些代码会处理你输入的内容（比如用户的问题），然后变出你想要的回答结果。就像搭积木一样，用代码规则搭建解决问题的流程～

## 输入

声明代码中需要使用的变量。添加输入参数时需要设置参数名和变量值，其中变量值支持设置为固定值或引用上游节点的输出参数。

<img src="/assets/CeTdbYD8OoLhHRxpHtWcK2aGnmf.png" src-width="1920" src-height="869" align="center"/>

## 代码

代码节点中需要执行的代码片段。你可以直接编写代码，也可以通过 AI 自动生成代码。支持Python和JavaScript两种开发语言

- 引用变量：直接使用输入参数中的变量，通过return一个对象来输出处理结果。
    - 假设妈妈给你一张购物清单（输入变量），你直接在原清单上添加要买的水果，最后把更新后的清单交还给妈妈（return 返回结果）。整个过程你直接用了原来的清单，没有重新抄一遍，这就是 "引用变量"。而最后交回的新清单就是处理后的结果。

- 函数限制：不支持编写多个函数。即使仅有一个输出值，也务必保持以对象的形式返回。
    - 哪怕结果只有一个数值，也要用 {} 包起来返回，就像用礼物盒包装礼物一样
    - 只能有一个默认函数

切换开发语言：

先点击【在IDE中编辑】

<img src="/assets/CUgwbkjynoFfdyxtwgxcGmQzntc.png" src-width="1920" src-height="869" align="center"/>

点击左上角，进行切换

<img src="/assets/MpelbJE10op1FixG86rchghNn6c.png" src-width="1920" src-height="869" align="center"/>

## 输出

代码运行成功后，输出的参数。你可以根据实际需求，在输出结构中只保留必要的参数。

确保此处定义的参数名、类型与代码的 return对象完全一致。以代码节点默认提供的代码为例，输出的参数与代码中定义的 return对象完全一致。

简单来说：当你写的代码运行成功后，需要输出结果（比如计算出的年龄、姓名等数据）。这时候要注意两点：

1️⃣ 输出的内容必须和代码里写的完全对应，就像数学答案要写 "解：" 开头一样，名字和格式都不能错

2️⃣ 可以只保留真正需要的结果。比如代码能算出年龄、身高、体重，但如果你只需要年龄，就只保留年龄，其他可以删掉不显示

就像做菜时你本来准备了盐、糖、酱油，但最后装盘时只放需要的调料就行，但装进调料瓶的东西必须和瓶子上写的标签一致～

一定要检查代码中定义的返回值类型和节点的返回值名称、类型都一样哦。如果不一样，节点则返回【null】导致后续节点获取不到值

<img src="/assets/Hm4pb7hKoooa3Qx1ly5ce5sQnxf.png" src-width="1920" src-height="869" align="center"/>

系统可以处理常见的各种数据类型，比如

1️⃣ 文字（String）：比如 "你好"、"abc123"

 2️⃣ 整数（Integer）：比如年龄 18、商品数量 5

 3️⃣ 真假值（Boolean）：只有开 / 关两种状态，像是否登录（是 / 否）

 4️⃣ 数字（Number）：包含小数，比如价格 9.9、身高 1.75

 5️⃣ 对象（Object）：像快递包裹，里面可以装各种东西的组合

 6️⃣ 列表（Array&lt;数据类型&gt;）：比如同时存储多条数据（需要保持类型一致）

就像收纳盒有不同的格子，每个格子专门存放特定类型的东西～

## 实际使用

接下来，让我们测试一下代码是否能运行

<img src="/assets/WGB3bUh8SoslYlxCCy4cxQR4nee.png" src-width="1920" src-height="869" align="center"/>

可以看到，节点的返回值和代码的返回值一样

<img src="/assets/WrtDb0wfCoGlxXxgUMdcTJxmnof.png" src-width="1920" src-height="869" align="center"/>

具体代码请根据自己的使用场景编写

