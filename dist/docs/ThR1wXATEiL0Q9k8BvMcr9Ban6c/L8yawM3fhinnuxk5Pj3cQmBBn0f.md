---
title: 2.3 结束节点
slug: ThR1wXATEiL0Q9k8BvMcr9Ban6c\L8yawM3fhinnuxk5Pj3cQmBBn0f
sidebar_position: 2
---


# 2.3 结束节点

结束节点是工作流的最终节点，用于返回工作流运行后的结果。结束节点支持两种返回方式，即返回变量和返回文本。

### 返回变量

返回变量模式下，工作流运行结束后会以 JSON 格式输出所有返回参数，适用于工作流绑定卡片或作为子工作流的场景。如果工作流直接绑定了智能体，对话中触发了工作流时，大模型会自动总结 JSON 格式的内容，并以自然语言回复用户。

### 返回文本

返回文本模式下，工作流运行结束后，智能体中的模型将直接使用指定的内容回复对话。回答内容中支持引用输出参数，也可以设置流式输出。具体说明如下：

假设你做了一个自动写作业的机器人（工作流），现在要告诉机器人做完作业后怎么交作业：

1. 返回变量模式
 就像你把所有解题步骤和草稿纸一起交给老师。机器人会把作业的所有中间数据（比如数学题的解题过程、作文的草稿）打包成一个文件包（JSON 格式）。

- 适合场景：当老师要检查你的解题过程，或者你的作业要被其他同学拿去当参考时使用。

1. 返回文本模式
 就像你直接把工整的作业本交给老师。机器人会整理出最终答案，比如直接在作业本上写好 "最终答案是：A 选项正确"。

- 可以引用中间步骤："根据公式 {{公式}} 计算得出结果是 {{答案}}"
- 流式输出就像微信聊天时的 "对方正在输入..."，答案会一个字一个字慢慢显示出来

举个实际例子：

 你让机器人帮忙查明天的课表：

- 返回变量会显示：{"周一课程":["数学","语文","体育"],"作业":3 项}
- 返回文本会直接说："明天周一有数学、语文、体育课，还有 3 项作业要完成"

这样是不是更好理解啦？就像交作业时可以选择交草稿本还是交整洁的作业本一样～

### 操作一下

打开工作流的【结束】节点

<img src="/assets/QIDkbzlBsoYqQtxTrVEcHO5AnNb.png" src-width="1920" src-height="870" align="center"/>

可以修改变量名称为name

修改变量值为【大模型】节点返回的output变量

还可以点击右上角的【➕】号，创建多个变量哦

创建完毕后，点击下面的【试运行】让我们看看结果吧

<img src="/assets/SSCNbvwsxo0corxriJfcUjJmnTc.png" src-width="1920" src-height="869" align="center"/>

随便绑定一个智能体或应用，并点击【保存并开始对话调试】

<img src="/assets/ClkObbApFo5zfzx8fYbckCUTnnb.png" src-width="1920" src-height="869" align="center"/>

发送一条测试消息【你是谁】

<img src="/assets/CizubuImqo8J0bxAGBAcHHF1nTh.png" src-width="1920" src-height="869" align="center"/>

可以看到，返回的确实是JSON格式的变量内容，与咱们前面设定的一样。

下面咱们把【返回变量】修改为【返回文本】

<img src="/assets/Vwc5bp1Mxo8WDBx5XpQcciJnnel.png" src-width="1920" src-height="870" align="center"/>

并修改回答内容为指定格式，再次进行测试。

注意这个【流式输出】，这个开关打开时，大模型在回答时，会逐字输出。而关闭时，就会等全部回答完成后，一次性输出答案。

我举个生活中的例子你就明白啦！比如你在手机上发消息：

✅ 打开【流式输出】就像对方正在输入时，你这边能看到文字一个一个跳出来，就像对方在实时打字一样："你... 好... 呀... 今... 天..."，直到完整句子出现。

❌ 关闭这个功能的话，你会先看到空白，过几秒突然 "唰" 的一下整句话同时出现，就像对方把整句话写好才发给你。

这就像看视频时选择【实时加载】还是【全部下载完再播放】的区别哦！

<img src="/assets/EvlNbGR4Jo0n0wx1EjncWd7fnCc.png" src-width="1919" src-height="869" align="center"/>

可以看到这次的回答，完全以文本形式、按咱们要求的格式返回啦。

好了，结束节点的介绍与使用教程到这里就结束啦

