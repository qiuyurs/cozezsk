---
title: 2.13 知识库写入节点
slug: ThR1wXATEiL0Q9k8BvMcr9Ban6c\Nt1HwkPXlimZFkk50PBcmO7fnmd
sidebar_position: 12
---


# 2.13 知识库写入节点

知识库写入节点用于向指定的知识库中添加文档。

简单来说：

1. 你的知识库就像个智能文件柜，可以随时查里面的资料
2. 想要添加新文件时，必须通过一个叫 "知识库写入节点" 的专用入口（就像文件柜顶部的投递口）
3. 新文件放进去后，会自动按文件柜原有的分类方式整理（比如自动拆分成段落或章节）
4. 这是唯一更新文件柜的方法，保证所有文件都整齐有序

整个过程就像往智能文件柜里投递新书，书会自动拆分成方便查找的书页存放。

- 知识库写入节点仅支持向一个文本类型的知识库中上传文本类型的文档。
- 每次运行知识库写入节点只能上传一个文件到知识库，但是你可以通过批处理或循环节点多次执行写入操作。
- 知识库写入节点为异步节点，工作流执行时无需等待文档上传完成。

## 输入与输出

知识库写入节点的输入参数固定为 knowledge，参数格式为 File，表示用户需要上传到知识库中的文件。此文件可以固定为某个文件，由知识库的搭建者在搭建时上传；也可以引用上游节点的输出参数，在上游节点获取文件后上传。

用快递站比喻更清楚：

1. 这个节点有个固定收件箱叫 "knowledge"，只接收文件包裹（File-doc 格式）
2. 包裹来源有两种方式：
    - 固定包裹：提前准备好的文件（比如用户手册），像在快递站常备的说明书
    - 流动包裹：从前面的工作环节传过来的文件（比如刚收到的邮件附件），像临时收到的快递包裹

比如：

- 固定方式：全年都要用的产品说明书
- 动态方式：每天从客服对话中自动提取的常见问题文档

两种方式最终都会被打包成 "knowledge" 包裹，按文件柜原有的分类方式入库

输出参数固定为以下参数：

- documentId：知识库文档的 ID。格式为 String。
- fileName：知识库文档的名称。格式为 String。
- FileUrl：知识库文档的访问地址。格式为 String。

## 使用

<img src="/assets/DAfDbdM0EoaXE9xt0aZc045ynJb.png" src-width="1920" src-height="869" align="center"/>

输入变量这里请选择前面节点的文件-doc类型变量，其他变量无法选中

<img src="/assets/U1Z6be68IoCuvCxs51XcG3rjnBM.png" src-width="1920" src-height="869" align="center"/>

然后添加一个文本类型的知识库

<img src="/assets/ZvL3bzehAo5Rq9xJdpWcrCIMnQb.png" src-width="1920" src-height="869" align="center"/>

修改相关参数

<img src="/assets/EB1XbzwhrooMudxgE7AcqBVtnRd.png" src-width="1920" src-height="869" align="center"/>

同时支持设置文档解析策略和分段策略，与直接在知识库上传体验一致

<img src="/assets/Jt4QbzAeMox7rBxjjNZcDTLanMh.png" src-width="1920" src-height="869" align="center"/>

测试一下

<img src="/assets/VgeHbyvlCoGvuyx47swcydkPnEd.png" src-width="1920" src-height="869" align="center"/>

文件上传成功

<img src="/assets/YXgxbEAN6o01e7x66DkckuIInQh.png" src-width="1919" src-height="869" align="center"/>

## 数据写入设置

### 文档解析策略

文档解析策略用于定义系统如何解析文档中的文本、图片或表格内容。支持设置为：

- 快速解析：不提取文档中的图像、表格元素，适用于纯文本格式的内容，该模式下解析速度更快。
- 精准解析：提取文档中的图片、表格元素，支持选择提取的元素类型，默认包含图片元素、图片元素（OCR）、表格元素。该模式需要耗费更长的时间来解析并处理数据，如果工作流下游还有知识库检索节点，精准解析模式下上传的文档可能会未完成解析而无法被立即检索。
    - 就像网购的衣服包裹：
        - 普通拆包：直接挂上货架（快速但信息少）
        - 精细拆包：要检查衣服成分标 / 熨平褶皱（慢但信息完整）
 建议贵重包裹下班前提前送检，避免客人急着查库存时找不到

### 分段策略

每次上传文档时都可以设置新文档的分段策略，合理的切片策略可以提高检索效率、提升检索结果的准确性。支持选择自动分段或自定义分段。

## 常见问题

### 用户上传的文档和开发者上传的文档有什么区别？

用户上传的文档和开发者上传的文档本身没有任何区别，都是知识库中的公开内容，可以被其他用户检索。但上传方式有区别，用户只能通过工作流的知识库写入节点上传文档，开发者则是在知识库管理页面或通过知识库 API 上传文档。

就像商场里的快递柜：

- 顾客只能通过寄存柜投递（用户用工作流上传）
- 工作人员有仓库钥匙随时补货（开发者后台操作）
 但无论谁投递的包裹，都会陈列在同一个货架上供查找

### 知识库写入节点是异步节点吗？

知识库写入节点为异步节点，工作流执行时无需等待文档上传完成。

